#!/usr/bin/env node
var program = require('commander'),
    pkg = require('../package.json'),
    fs = require('fs');

var DoxyDoc = require('../doxydoc');

program.version(pkg.version)
    .usage('[options] file1, files2, ...')
    .option('-o, --outfile <file>', 'Write output to file')
    .option('-t, --template <file>', 'Use your own template')
    .parse(process.argv);

if (program.args.length) {
    var doxydoc = new DoxyDoc();

    if (program.template) {
        doxydoc.templateFile = program.template;
    }

    if (program.outfile) {
        fs.writeFile(program.outfile, doxydoc.parse('html', program.args));
    }
    else {
        console.log(doxydoc.parse('json', program.args));
    }
}